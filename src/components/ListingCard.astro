---
import type { CollectionEntry } from 'astro:content';
import { toBasePath } from '../config/site';
import { normalizeTaxonomyValue } from '../utils/listing';

interface Props {
  listing: CollectionEntry<'listings'>;
}

const { listing } = Astro.props;
---

<article>
  <h3><a href={toBasePath(`/listing/${listing.slug}`)}>{listing.data.title}</a></h3>
  <p>{listing.data.description}</p>
  <p>
    <strong>Category:</strong>
    <a href={toBasePath(`/category/${normalizeTaxonomyValue(listing.data.category)}`)}>{listing.data.category}</a>
  </p>
  <p>
    <strong>City:</strong>
    <a href={toBasePath(`/city/${normalizeTaxonomyValue(listing.data.city)}`)}>{listing.data.city}</a>
  </p>

  {listing.data.priceRange && (
    <p>
      <strong>Price:</strong> {listing.data.priceRange}
    </p>
  )}
  {listing.data.bestFor.length > 0 && (
    <p>
      <strong>Best for:</strong> {listing.data.bestFor.join(', ')}
    </p>
  )}
</article>

<style>
  article {
    background: linear-gradient(170deg, rgb(255 255 255 / 96%), rgb(253 246 250 / 86%));
    border: 1px solid #edd8e7;
    border-radius: 1rem;
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 20px 35px -28px rgb(92 48 73 / 42%);
  }

  h3 {
    margin-top: 0;
    margin-bottom: 0.4rem;
  }

  h3 a {
    text-decoration: none;
  }

  h3 a:hover {
    text-decoration: underline;
  }

  p {
    margin: 0.45rem 0;
  }
</style>
