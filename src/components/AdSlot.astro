---
import { ADS_ENABLED, ADSENSE_CLIENT_ID, getAdSlotId } from '../config/site';

interface Props {
  slotName: string;
  position: string;
}

const { slotName, position } = Astro.props;
const slotId = getAdSlotId(slotName);
const shouldRenderAd = ADS_ENABLED && Boolean(ADSENSE_CLIENT_ID) && Boolean(slotId);
---

{shouldRenderAd && (
  <div class="ad-slot" data-slot-name={slotName} data-position={position}>
    <ins
      class="adsbygoogle"
      style="display:block"
      data-ad-client={ADSENSE_CLIENT_ID}
      data-ad-slot={slotId}
      data-ad-format="auto"
      data-full-width-responsive="true"
    ></ins>
    <script is:inline>
      {`(adsbygoogle = window.adsbygoogle || []).push({});`}
    </script>
  </div>
)}

<style>
  .ad-slot {
    margin: 1rem 0;
  }

  .adsbygoogle {
    min-height: 90px;
  }
</style>
